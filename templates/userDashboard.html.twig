{% extends 'base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block aside %}
<div class="content-wrapper">
<h2>Liko minučių: {{ credits_left }}</h2>
<h4><a class=" link button" href="{{ path('pricing') }}" role="button">Pirkti daugiau minučių</a></h4>
</div>
{% endblock %}

{% block main %}
    <h1>Mano Transkripcijos</h1>
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Data</th>
            <th scope="col">Failas</th>
            <th scope="col">Trukmė</th>
            <th scope="col">Paskutinį kartą redaguota</th>
            <th scope="col">Veiksmai</th>
        </tr>
        </thead>
        <tbody>
        {% for scrybe in transcriptions %}
            <tr>
                <th scope="row">{{ scrybe.no }}</th>
                <td>{{ scrybe.date }}</td>
                <td>{{ scrybe.title }}</td>
                <td>{{ scrybe.length }}</td>
                <td>{{ scrybe.updated }}</td>
                <td>
                    {% if scrybe.scrybeStatus == scrybe_done %}
                        <a class="table-link" href="{{ url('edit_scribed_text', {'userfileId': scrybe.id} ) }}" role="link">Redaguoti</a>
                    {% elseif scrybe.scrybeStatus == scrybe_in_progress %}
                        <a class="table-link" href="{{ url('check_scrybe_status', {'userfileId': scrybe.id} ) }}" role="link">Apdorojama</a>
                    {% elseif scrybe.scrybeStatus == scrybe_imposible %}
                        Nepavyko/Nėra šnektos
                    {% else %}
                        <a class="table-link" href="{{ url('send_with_api', {'userfileId': scrybe.id} ) }}" role="link">Transkribuoti</a>
                    {% endif %}
                    <a class="requires-confirm table-link" href="{{ url('delete_file', {'userfileId': scrybe.id} ) }}" role="link">Trinti</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('dashboardJs') }}
{% endblock %}